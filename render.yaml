services:
  - type: web
    name: bambu-lab
    env: python
    plan: free
    buildCommand: |
      # install python deps
      pip install -r requirements.txt
      # if you include a local superslicer binary in repo at ./superslicer/superslicer_console,
      # copy it to a stable location Render apps can execute from
      if [ -f ./superslicer/superslicer_console ]; then
        sudo mkdir -p /opt/render/superslicer
        sudo cp ./superslicer/superslicer_console /opt/render/superslicer/superslicer_console
        sudo chmod +x /opt/render/superslicer/superslicer_console
      fi
    startCommand: gunicorn app:app
    envVars:
      - key: SUPERSLICER_PATH
        value: /opt/render/superslicer/superslicer_console
